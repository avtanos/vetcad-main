"""
–°–∫—Ä–∏–ø—Ç –¥–ª—è –ø–æ–ª–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞: –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ë–î + –º–æ–∫–∞–ø –¥–∞–Ω–Ω—ã–µ
"""
import subprocess
import sys

def run_command(command, description):
    """–í—ã–ø–æ–ª–Ω—è–µ—Ç –∫–æ–º–∞–Ω–¥—É –∏ –≤—ã–≤–æ–¥–∏—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç"""
    print(f"\n{'='*50}")
    print(f"üîÑ {description}")
    print(f"{'='*50}")
    try:
        result = subprocess.run(
            command,
            shell=True,
            check=True,
            capture_output=True,
            text=True
        )
        print(result.stdout)
        return True
    except subprocess.CalledProcessError as e:
        print(f"‚ùå –û—à–∏–±–∫–∞: {e.stderr}")
        return False

def main():
    print("="*50)
    print("üöÄ –ü–û–õ–ù–ê–Ø –ù–ê–°–¢–†–û–ô–ö–ê –ü–†–û–ï–ö–¢–ê VETCARD")
    print("="*50)
    
    # –®–∞–≥ 1: –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ë–î
    if not run_command("python -m app.init_db", "–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö"):
        print("\n‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö")
        sys.exit(1)
    
    # –®–∞–≥ 2: –°–æ–∑–¥–∞–Ω–∏–µ –º–æ–∫–∞–ø –¥–∞–Ω–Ω—ã—Ö
    response = input("\n‚ùì –°–æ–∑–¥–∞—Ç—å –º–æ–∫–∞–ø –¥–∞–Ω–Ω—ã–µ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è? (y/n): ")
    if response.lower() == 'y':
        if not run_command("python -m app.mock_data", "–°–æ–∑–¥–∞–Ω–∏–µ –º–æ–∫–∞–ø –¥–∞–Ω–Ω—ã—Ö"):
            print("\n‚ö†Ô∏è  –ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ–∑–¥–∞—Ç—å –º–æ–∫–∞–ø –¥–∞–Ω–Ω—ã–µ, –Ω–æ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞")
        else:
            print("\n‚úÖ –ú–æ–∫–∞–ø –¥–∞–Ω–Ω—ã–µ —Å–æ–∑–¥–∞–Ω—ã!")
            print("\nüìã –£—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –≤—Ö–æ–¥–∞:")
            print("   ‚Ä¢ petowner / password123 (–≤–ª–∞–¥–µ–ª–µ—Ü)")
            print("   ‚Ä¢ veterinarian / password123 (–≤–µ—Ç–µ—Ä–∏–Ω–∞—Ä)")
            print("   ‚Ä¢ partner / password123 (–ø–∞—Ä—Ç–Ω–µ—Ä)")
    else:
        print("\n‚è≠Ô∏è  –ü—Ä–æ–ø—É—â–µ–Ω–æ —Å–æ–∑–¥–∞–Ω–∏–µ –º–æ–∫–∞–ø –¥–∞–Ω–Ω—ã—Ö")
    
    print("\n" + "="*50)
    print("‚úÖ –ù–ê–°–¢–†–û–ô–ö–ê –ó–ê–í–ï–†–®–ï–ù–ê!")
    print("="*50)
    print("\nüìù –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:")
    print("   1. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ .env —Ñ–∞–π–ª (–µ—Å–ª–∏ –µ—â–µ –Ω–µ —Å–¥–µ–ª–∞–Ω–æ)")
    print("   2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä: python run.py")
    print("   3. –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:8000/docs –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ API")

if __name__ == "__main__":
    main()

